"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[2005],{62755:function(t,e,i){i.d(e,{B:function(){return v}});var n=i(61681),r=i(71760),o=i(3466),s=i(12173),l=i(41610),a=i(65943),p=i(81977);function u(t){return d[y(t)]||g}function y(t){return t instanceof Blob?t.type:c(t.url)}function c(t){const e=(0,o.Ml)(t);return f[e]||h}const d={},h="text/plain",g=d[h],f={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const P in f)d[f[P]]=P;var b=i(16641);function v(t){const e=(0,n.pC)(t)&&t.origins?t.origins:[void 0];return(i,n)=>{const r=C(t,i,n);for(const t of e){const e=(0,p.CJ)(i,t,n);for(const t in r)e[t]=r[t]}}}function C(t,e,i){if((0,n.pC)(t)&&"resource"===t.type)return _(t,e,i);switch((0,n.pC)(t)&&t.type?t.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:t,write:e}=b.p;return{read:t,write:e}}}}function _(t,e,i){const s=(0,l.VZ)(e,i);return{type:String,read:(t,e,i)=>{const n=(0,b.r)(t,e,i);return s.type===String?n:"function"==typeof s.type?new s.type({url:n}):void 0},write:{writer(e,l,p,u){if(!u||!u.resources)return"string"==typeof e?void(l[p]=(0,b.t)(e,u)):void(l[p]=e.write({},u));const y=E(e),c=y?(0,b.t)(y,{...u,verifyItemRelativeUrls:u&&u.verifyItemRelativeUrls?{writtenUrls:u.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},b.M.NO):null,d=s.type!==String&&(!(0,r.l)(this)||u&&u.origin&&this.originIdOf(i)>(0,a.M9)(u.origin));u&&u.portalItem&&(0,n.pC)(c)&&!(0,o.YP)(c)?d?w(this,i,e,c,l,p,u,t):j(c,l,p,u):u&&u.portalItem&&((0,n.Wi)(c)||(0,n.pC)((0,b.i)(c))||(0,o.jc)(c)||d)?m(this,i,e,c,l,p,u,t):l[p]=c}}}}function m(t,e,i,r,l,a,p,y){const c=(0,s.D)(),d=x(i,r,p),h=(0,o.v_)((0,n.U2)(y,"prefix"),c),g=`${h}.${u(d)}`,f=p.portalItem.resourceFromPath(g);(0,o.jc)(r)&&p.resources.pendingOperations.push(O(r).then((t=>{f.path=`${h}.${u(t)}`,l[a]=f.itemRelativeUrl})).catch((()=>{}))),I(t,e,f,d,p.resources.toAdd),l[a]=f.itemRelativeUrl}function w(t,e,i,n,r,s,l,a){const p=l.portalItem.resourceFromPath(n),y=x(i,n,l);u(y)===(0,o.Ml)(p.path)?(I(t,e,p,y,l.resources.toUpdate),r[s]=n):m(t,e,i,n,r,s,l,a)}function j(t,e,i,n){n.resources.toKeep.push({resource:n.portalItem.resourceFromPath(t)}),e[i]=t}function I(t,e,i,n,r){r.push({resource:i,content:n,finish:i=>{S(t,e,i)}})}function x(t,e,i){return"string"==typeof t?{url:e}:new Blob([JSON.stringify(t.toJSON(i))],{type:"application/json"})}async function O(t){const e=(await Promise.resolve().then(i.bind(i,66341))).default,{data:n}=await e(t,{responseType:"blob"});return n}function E(t){return(0,n.Wi)(t)?null:"string"==typeof t?t:t.url}function S(t,e,i){"string"==typeof t[e]?t[e]=i.url:t[e].url=i.url}},22005:function(t,e,i){i.r(e),i.d(e,{default:function(){return B}});var n=i(36663),r=i(53404),o=i(41151),s=i(86618),l=i(72285),a=i(61681),p=i(81977),u=(i(7753),i(39994),i(7283),i(40266));let y=0,c=class extends((0,l.eC)((0,o.J)((0,s.IG)(r.Z)))){constructor(t){super(t),this.id=`${Date.now().toString(16)}-analysis-${y++}`,this.title=null}get parent(){return this._get("parent")}set parent(t){const e=this.parent;if((0,a.pC)(e))switch(e.type){case"line-of-sight":e.removeAnalysis(this);break;case"2d":case"3d":e.analyses.includes(this)&&e.analyses.remove(this)}this._set("parent",t)}get isEditable(){return this.requiredPropertiesForEditing.every(a.pC)}};(0,n._)([(0,p.Cb)({type:String,constructOnly:!0,clonable:!1})],c.prototype,"id",void 0),(0,n._)([(0,p.Cb)({type:String})],c.prototype,"title",void 0),(0,n._)([(0,p.Cb)({constructOnly:!0})],c.prototype,"type",void 0),(0,n._)([(0,p.Cb)({clonable:!1,value:null})],c.prototype,"parent",null),(0,n._)([(0,p.Cb)({readOnly:!0})],c.prototype,"extent",void 0),(0,n._)([(0,p.Cb)({readOnly:!0})],c.prototype,"isEditable",null),(0,n._)([(0,p.Cb)({readOnly:!0})],c.prototype,"requiredPropertiesForEditing",void 0),(0,n._)([(0,p.Cb)({readOnly:!0})],c.prototype,"nonEditableMessage",void 0),c=(0,n._)([(0,u.j)("esri.analysis.Analysis")],c);const d=c;function h(t,e){return g(t)===g(e)}function g(t){if((0,a.Wi)(t))return null;const e=null!=t.layer?t.layer.id:"";let i=null;return i=null!=t.objectId?t.objectId:null!=t.layer&&"objectIdField"in t.layer&&null!=t.layer.objectIdField&&null!=t.attributes?t.attributes[t.layer.objectIdField]:t.uid,null==i?null:`o-${e}-${i}`}const f={json:{write:{writer:b,target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:v}}}};function b(t,e){(0,a.Wi)(t)||null==t.layer?.objectIdField||null==t.attributes||(e.feature={layerId:t.layer.id,objectId:t.attributes[t.layer.objectIdField]})}function v(t){if(null!=t.layerId&&null!=t.objectId)return{uid:null,layer:{id:t.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:t.objectId}}}var C=i(62755),_=i(86566),m=i(9065);let w=class extends((0,l.eC)((0,o.J)(r.Z))){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,a._W)(this.position,t.position)&&(0,a._W)(this.elevationInfo,t.elevationInfo)&&h(this.feature,t.feature)}};(0,n._)([(0,p.Cb)({type:_.Z}),(0,C.B)()],w.prototype,"position",void 0),(0,n._)([(0,p.Cb)({type:m.ZP}),(0,C.B)()],w.prototype,"elevationInfo",void 0),(0,n._)([(0,p.Cb)(f)],w.prototype,"feature",void 0),w=(0,n._)([(0,u.j)("esri.analysis.LineOfSightAnalysisObserver")],w);const j=w;let I=class extends((0,l.eC)(o.j)){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,a._W)(this.position,t.position)&&(0,a._W)(this.elevationInfo,t.elevationInfo)&&h(this.feature,t.feature)}};(0,n._)([(0,p.Cb)({type:_.Z}),(0,C.B)()],I.prototype,"position",void 0),(0,n._)([(0,p.Cb)({type:m.ZP}),(0,C.B)()],I.prototype,"elevationInfo",void 0),(0,n._)([(0,p.Cb)(f)],I.prototype,"feature",void 0),I=(0,n._)([(0,u.j)("esri.analysis.LineOfSightAnalysisTarget")],I);const x=I;var O=i(33511),E=i(58811),S=i(76868),P=i(4757),R=i(37116);i(91478);function W(t,e){return(0,a.Wi)(e)||!e.mode?t?"absolute-height":"on-the-ground":e.mode}function F(t,e){return W(!!(0,a.pC)(t)&&t.hasZ,e)}const z=O.Z.ofType(x);let Z=class extends d{constructor(t){super(t),this.type="line-of-sight",this.observer=null,this.extent=null,this.nonEditableMessage="Assign an observer location to the analysis to allow editing."}initialize(){this.own((0,S.YP)((()=>this._computeExtent()),(t=>{((0,a.Wi)(t)||(0,a.Wi)(t.pending))&&this._set("extent",(0,a.pC)(t)?t.extent:null)}),S.tX))}get targets(){return this._get("targets")||new z}set targets(t){this._set("targets",(0,E.Z)(t,this.targets,z))}get spatialReference(){return(0,a.pC)(this.observer)&&(0,a.pC)(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,a.yw)(this.observer,(t=>t.position))]}async waitComputeExtent(){const t=this._computeExtent();return(0,a.pC)(t)?(0,a.Wg)(t.pending):null}_computeExtent(){const t=this.spatialReference;if((0,a.Wi)(this.observer)||(0,a.Wi)(this.observer.position)||(0,a.Wi)(t))return null;const e=t=>"absolute-height"===F(t.position,t.elevationInfo),i=this.observer.position,n=(0,R.al)(i.x,i.y,i.z,i.x,i.y,i.z);for(const o of this.targets)if((0,a.pC)(o.position)){const e=(0,P.dz)(o.position,t);if((0,a.pC)(e.pending))return{pending:e.pending,extent:null};if((0,a.pC)(e.geometry)){const{x:t,y:i,z:r}=e.geometry;(0,R.pp)(n,[t,i,r])}}const r=(0,R.HH)(n,t);return e(this.observer)&&this.targets.every(e)||(r.zmin=null,r.zmax=null),{pending:null,extent:r}}clear(){this.observer=null,this.targets.removeAll()}};(0,n._)([(0,p.Cb)({type:["line-of-sight"]})],Z.prototype,"type",void 0),(0,n._)([(0,p.Cb)({type:j,json:{read:!0,write:!0}})],Z.prototype,"observer",void 0),(0,n._)([(0,p.Cb)({cast:E.R,type:z,nonNullable:!0,json:{read:!0,write:!0}})],Z.prototype,"targets",null),(0,n._)([(0,p.Cb)({value:null,readOnly:!0})],Z.prototype,"extent",void 0),(0,n._)([(0,p.Cb)({readOnly:!0})],Z.prototype,"spatialReference",null),(0,n._)([(0,p.Cb)({readOnly:!0})],Z.prototype,"requiredPropertiesForEditing",null),(0,n._)([(0,p.Cb)({readOnly:!0})],Z.prototype,"nonEditableMessage",void 0),Z=(0,n._)([(0,u.j)("esri.analysis.LineOfSightAnalysis")],Z);const L=Z;var A=i(63314),U=i(48672),M=i(16908);const $=O.Z.ofType(x);let q=class extends((0,M.q)((0,A.R)(U.Z))){constructor(t){super(t),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new L,this.opacity=1}initialize(){this.own((0,S.YP)((()=>this.analysis),((t,e)=>{(0,a.pC)(e)&&e.parent===this&&(e.parent=null),(0,a.pC)(t)&&(t.parent=this)}),S.tX))}async load(){return(0,a.pC)(this.analysis)&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return(0,a.yw)(this.analysis,(t=>t.observer))}set observer(t){(0,a.yw)(this.analysis,(e=>e.observer=t))}get targets(){return(0,a.pC)(this.analysis)?this.analysis.targets:null}set targets(t){(0,a.yw)(this.analysis,(e=>e.targets=t))}get fullExtent(){return(0,a.pC)(this.analysis)?this.analysis.extent:null}get spatialReference(){return(0,a.pC)(this.analysis)?this.analysis.spatialReference:null}removeAnalysis(t){this.analysis===t&&(this.analysis=new L)}};(0,n._)([(0,p.Cb)({json:{read:!1},readOnly:!0})],q.prototype,"type",void 0),(0,n._)([(0,p.Cb)({type:["LineOfSightLayer"]})],q.prototype,"operationalLayerType",void 0),(0,n._)([(0,p.Cb)({type:j,json:{read:!0,write:{ignoreOrigin:!0}}})],q.prototype,"observer",null),(0,n._)([(0,p.Cb)({type:$,json:{read:!0,write:{ignoreOrigin:!0}}})],q.prototype,"targets",null),(0,n._)([(0,p.Cb)({nonNullable:!0,json:{read:!1,write:!1}})],q.prototype,"analysis",void 0),(0,n._)([(0,p.Cb)({readOnly:!0})],q.prototype,"fullExtent",null),(0,n._)([(0,p.Cb)({readOnly:!0})],q.prototype,"spatialReference",null),(0,n._)([(0,p.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],q.prototype,"opacity",void 0),(0,n._)([(0,p.Cb)({type:["show","hide"]})],q.prototype,"listMode",void 0),q=(0,n._)([(0,u.j)("esri.layers.LineOfSightLayer")],q);const B=q}}]);
//# sourceMappingURL=2005.c6e9aa74.js.map