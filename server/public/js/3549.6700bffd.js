"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[3549,8163],{53549:function(n,e,t){t.r(e),t.d(e,{executeScript:function(){return Fn},extend:function(){return On},extractFieldLiterals:function(){return xn},findFunctionCalls:function(){return Mn},functionHelper:function(){return Zn},referencesFunction:function(){return Ln},referencesMember:function(){return Hn},validateScript:function(){return Un}});var r=t(58780),o=t(56088),i=t(19249),a=t(94634),u=t(30359),c=t(46001),l=t(8965),s=t(94837),f=t(61125),w=t(33556),h=t(56101),p=t(88163),d=t(32200),g=t(63038),m=t(47154),y=t(91135),E=t(91772),I=t(20031),v=t(74304),N=t(86566),A=t(89542),R=t(90819),b=t(14685);function S(n){return n&&"function"==typeof n.then}const C=100;async function T(n,e){const t=[];for(let r=0;r<e.arguments.length;r++)t.push(await F(n,e.arguments[r]));return t}async function Z(n,e,t){return!0===e.preparsed?t(n,null,e.arguments):t(n,e,await T(n,e))}async function O(n,e,t){if(!0===e.preparsed){const r=t(n,null,e.arguments);return S(r),r}const r=t(n,e,await T(n,e));return S(r),r}async function F(n,e,t){if(e.breakpoint&&!0!==t){const t=e.breakpoint();return await t,F(n,e,!0)}switch(e.type){case"VariableDeclarator":return en(n,e);case"VariableDeclaration":return nn(n,e,0);case"BlockStatement":return K(n,e);case"FunctionDeclaration":return X(n,e);case"ReturnStatement":return $(n,e);case"IfStatement":return q(n,e);case"ExpressionStatement":return J(n,e);case"UpdateExpression":return B(n,e);case"AssignmentExpression":return W(n,e);case"ForStatement":return P(n,e);case"ForInStatement":return Y(n,e);case"BreakStatement":return s.w;case"EmptyStatement":return s.v;case"ContinueStatement":return s.x;case"TemplateElement":return wn(n,e);case"TemplateLiteral":return hn(n,e);case"Identifier":return sn(n,e);case"MemberExpression":return on(n,e);case"Literal":return e.value;case"CallExpression":return fn(n,e);case"UnaryExpression":return an(n,e);case"BinaryExpression":return cn(n,e);case"LogicalExpression":return ln(n,e);case"ArrayExpression":return un(n,e);case"ObjectExpression":return x(n,e);case"Property":return U(n,e);default:throw new Error((0,f.H5)(e,"RUNTIME","UNREOGNISED"))}}async function x(n,e){const t=[];for(let i=0;i<e.properties.length;i++)t[i]=await F(n,e.properties[i]);const r={};for(let i=0;i<t.length;i++){const n=t[i];if((0,s.o)(n.value))throw new Error("Illegal Argument");if(!1===(0,s.b)(n.key))throw new Error("Illegal Argument");n.value===s.v?r[n.key.toString()]=null:r[n.key.toString()]=n.value}const o=new i.Z(r);return o.immutable=!1,o}async function U(n,e){const t=await F(n,e.value);return"Identifier"===e.key.type?{key:e.key.name,value:t}:{key:await F(n,e.key),value:t}}async function H(n,e,t){const r=await F(n,e.body);return t.lastAction=r,t.lastAction===s.w||t.lastAction instanceof s.R?(t.testResult=!1,t):null!==e.update?(await F(n,e.update),t):t}async function L(n,e,t){if(null!==e.test){const r=await F(n,e.test);if(!0===n.abortSignal.aborted)throw new Error("Cancelled");if(t.testResult=r,!1===t.testResult)return t;if(!0!==t.testResult)throw new Error((0,f.H5)(e,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return H(n,e,t)}return H(n,e,t)}function M(n,e,t,r,o,i){try{L(n,e,t).then((()=>{try{!0===t.testResult?++i>C?(i=0,setTimeout((()=>{M(n,e,t,r,o,i)}),0)):M(n,e,t,r,o,i):t.lastAction instanceof s.R?r(t.lastAction):r(s.v)}catch(a){o(a)}}),(n=>{o(n)}))}catch(a){o(a)}}function P(n,e){try{return null!==e.init?F(n,e.init).then((()=>new Promise(((t,r)=>{M(n,e,{testResult:!0,lastAction:s.v},(n=>{t(n)}),(n=>{r(n)}),0)})))):new Promise(((t,r)=>{M(n,e,{testResult:!0,lastAction:s.v},(n=>{t(n)}),(n=>{r(n)}),0)}))}catch(t){return Promise.reject(t)}}function D(n,e,t,r,o,i,a,u,c,l){try{if(r<=i)return void u(s.v);o.value="k"===a?t[i]:i,F(n,e.body).then((f=>{try{f instanceof s.R?u(f):f===s.w?u(s.v):++l>C?(l=0,setTimeout((()=>{D(n,e,t,r,o,i+1,a,u,c,l)}),0)):D(n,e,t,r,o,i+1,a,u,c,l)}catch(w){c(w)}}),(n=>{c(n)}))}catch(f){c(f)}}function k(n,e,t,r,o,i,a,u,c){try{if(t.length()<=o)return void a(s.v);r.value="k"===i?t.get(o):o,F(n,e.body).then((l=>{l instanceof s.R?a(l):l===s.w?a(s.v):++c>C?(c=0,setTimeout((()=>{k(n,e,t,r,o+1,i,a,u,c)}),0)):k(n,e,t,r,o+1,i,a,u,c)}),(n=>{u(n)}))}catch(l){u(l)}}function z(n,e,t,r,o,i){try{if(void 0===i&&(i="i"),0===t.length)return void r.resolve(s.v);D(n,e,t,t.length,o,0,i,(n=>{r.resolve(n)}),(n=>{r.reject(n)}),0)}catch(a){r.reject(a)}}function _(n,e,t,r,o,i){try{if(void 0===i&&(i="i"),0===t.length)return void r.resolve(s.v);k(n,e,t,o,0,i,(n=>{r.resolve(n)}),(n=>{r.reject(n)}),0)}catch(a){r.reject(a)}}function j(n,e,t,r,o){try{z(n,e,t.keys(),r,o,"k")}catch(i){r.reject(i)}}function V(n,e,t,r,o,i,u,c){try{n.next().then((l=>{try{if(null===l)i(s.v);else{const f=a.Z.createFromGraphicLikeObject(l.geometry,l.attributes,r);f._underlyingGraphic=l,o.value=f,F(e,t.body).then((a=>{try{a===s.w?i(s.v):a instanceof s.R?i(a):++c>C?(c=0,setTimeout((()=>{V(n,e,t,r,o,i,u,c)}),0)):V(n,e,t,r,o,i,u,c)}catch(l){u(l)}}),(n=>{u(n)}))}}catch(f){u(f)}}),(n=>{u(n)}))}catch(l){u(l)}}async function Y(n,e){return new Promise(((t,r)=>{F(n,e.right).then((o=>{try{let a=null;a="VariableDeclaration"===e.left.type?F(n,e.left):Promise.resolve(),a.then((()=>{try{let a="";if("VariableDeclaration"===e.left.type){const n=e.left.declarations[0].id;"Identifier"===n.type&&(a=n.name)}else"Identifier"===e.left.type&&(a=e.left.name);if(!a)throw new Error((0,f.H5)(e,"RUNTIME","INVALIDVARIABLE"));a=a.toLowerCase();let u=null;if(null!==n.localScope&&void 0!==n.localScope[a]&&(u=n.localScope[a]),null===u&&void 0!==n.globalScope[a]&&(u=n.globalScope[a]),null===u)return void r(new Error((0,f.H5)(e,"RUNTIME","VARIABLENOTDECLARED")));(0,s.l)(o)||(0,s.b)(o)?z(n,e,o,{reject:r,resolve:t},u):(0,s.n)(o)?_(n,e,o,{reject:r,resolve:t},u):o instanceof i.Z||(0,s.s)(o)?j(n,e,o,{reject:r,resolve:t},u):(0,s.y)(o)?V(o.iterator(n.abortSignal),n,e,o,u,(n=>{t(n)}),(n=>{r(n)}),0):z(n,e,[],{reject:r,resolve:t},u)}catch(a){r(a)}}),r)}catch(a){r(a)}}),r)}))}async function B(n,e){const t=e.argument;if("MemberExpression"===t.type){const r={t:null},o=await F(n,t.object);let a=null;r.t=o,!0===t.computed?a=await F(n,t.property):"Identifier"===t.property.type&&(a=t.property.name);const u=r.t;let c;if((0,s.l)(u)){if(!(0,s.a)(a))throw new Error("Invalid Parameter");if(a<0&&(a=u.length+a),a<0||a>=u.length)throw new Error("Assignment outside of array bounds");c=(0,s.f)(u[a]),u[a]="++"===e.operator?c+1:c-1}else if(u instanceof i.Z){if(!1===(0,s.b)(a))throw new Error("Dictionary accessor must be a string");if(!0!==u.hasField(a))throw new Error("Invalid Parameter");c=(0,s.f)(u.field(a)),u.setField(a,"++"===e.operator?c+1:c-1)}else{if(!(0,s.s)(u))throw(0,s.n)(u)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,s.b)(a))throw new Error("Feature accessor must be a string");if(!0!==u.hasField(a))throw new Error("Invalid Parameter");c=(0,s.f)(u.field(a)),u.setField(a,"++"===e.operator?c+1:c-1)}return!1===e.prefix?c:"++"===e.operator?c+1:c-1}const r="Identifier"===e.argument.type?e.argument.name.toLowerCase():"";if(!r)throw new Error("Invalid identifier");let o;if(null!==n.localScope&&void 0!==n.localScope[r])return o=(0,s.f)(n.localScope[r].value),n.localScope[r]={value:"++"===e.operator?o+1:o-1,valueset:!0,node:e},!1===e.prefix?o:"++"===e.operator?o+1:o-1;if(void 0!==n.globalScope[r])return o=(0,s.f)(n.globalScope[r].value),n.globalScope[r]={value:"++"===e.operator?o+1:o-1,valueset:!0,node:e},!1===e.prefix?o:"++"===e.operator?o+1:o-1;throw new Error("Variable not recognised")}function G(n,e,t,r){switch(e){case"=":return n===s.v?null:n;case"/=":return(0,s.f)(t)/(0,s.f)(n);case"*=":return(0,s.f)(t)*(0,s.f)(n);case"-=":return(0,s.f)(t)-(0,s.f)(n);case"+=":return(0,s.b)(t)||(0,s.b)(n)?(0,s.h)(t)+(0,s.h)(n):(0,s.f)(t)+(0,s.f)(n);case"%=":return(0,s.f)(t)%(0,s.f)(n);default:throw new Error((0,f.H5)(r,"RUNTIME","OPERATORNOTRECOGNISED"))}}async function W(n,e){const t=e.left;if("MemberExpression"===t.type){const r=await F(n,e.right),o=await F(n,t.object);let a=null;if(!0===t.computed)a=await F(n,t.property);else{if("Identifier"!==t.property.type)throw new Error("Expected computed or identifier for assignemnt target");a=t.property.name}if((0,s.l)(o)){if(!(0,s.a)(a))throw new Error("Invalid Parameter");if(a<0&&(a=o.length+a),a<0||a>o.length)throw new Error("Assignment outside of array bounds");if(a===o.length){if("="!==e.operator)throw new Error("Invalid Parameter");o[a]=G(r,e.operator,o[a],e)}else o[a]=G(r,e.operator,o[a],e)}else if(o instanceof i.Z){if(!1===(0,s.b)(a))throw new Error("Dictionary accessor must be a string");if(!0===o.hasField(a))o.setField(a,G(r,e.operator,o.field(a),e));else{if("="!==e.operator)throw new Error("Invalid Parameter");o.setField(a,G(r,e.operator,null,e))}}else{if(!(0,s.s)(o))throw(0,s.n)(o)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,s.b)(a))throw new Error("Feature accessor must be a string");if(!0===o.hasField(a))o.setField(a,G(r,e.operator,o.field(a),e));else{if("="!==e.operator)throw new Error("Invalid Parameter");o.setField(a,G(r,e.operator,null,e))}}return s.v}const r=t.name.toLowerCase();if(null!==n.localScope&&void 0!==n.localScope[r]){const t=await F(n,e.right);return n.localScope[r]={value:G(t,e.operator,n.localScope[r].value,e),valueset:!0,node:e.right},s.v}if(void 0!==n.globalScope[r]){const t=await F(n,e.right);return n.globalScope[r]={value:G(t,e.operator,n.globalScope[r].value,e),valueset:!0,node:e.right},s.v}throw new Error("Cannot assign undeclared variable")}async function J(n,e){if("AssignmentExpression"===e.expression.type)return F(n,e.expression);if("CallExpression"===e.expression.type){const t=await F(n,e.expression);return t===s.v?s.v:new s.I(t)}const t=await F(n,e.expression);return t===s.v?s.v:new s.I(t)}async function q(n,e){if("AssignmentExpression"===e.test.type||"UpdateExpression"===e.test.type)throw new Error((0,f.H5)(e.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));const t=await F(n,e.test);if(!0===t)return F(n,e.consequent);if(!1===t)return null!==e.alternate?F(n,e.alternate):s.v;throw new Error((0,f.H5)(e.test,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))}async function K(n,e){return Q(n,e,0)}async function Q(n,e,t){if(t>=e.body.length)return s.v;const r=await F(n,e.body[t]);return r instanceof s.R||r===s.w||r===s.x||t===e.body.length-1?r:Q(n,e,t+1)}async function $(n,e){if(null===e.argument)return new s.R(s.v);const t=await F(n,e.argument);return new s.R(t)}async function X(n,e){const t=e.id.name.toLowerCase();return n.globalScope[t]={valueset:!0,node:null,value:new u.Z(e,n)},s.v}async function nn(n,e,t){return t>=e.declarations.length||(await F(n,e.declarations[t]),t===e.declarations.length-1||await nn(n,e,t+1)),s.v}async function en(n,e){let t=null;if(t=null===e.init?null:await F(n,e.init),null!==n.localScope){if(t===s.v&&(t=null),"Identifier"!==e.id.type)throw new Error("Can only assign a regular variable");const r=e.id.name.toLowerCase();return n.localScope[r]={value:t,valueset:!0,node:e.init},s.v}if("Identifier"!==e.id.type)throw new Error("Can only assign a regular variable");const r=e.id.name.toLowerCase();return t===s.v&&(t=null),n.globalScope[r]={value:t,valueset:!0,node:e.init},s.v}let tn=0;function rn(n,e,t,r){let o;switch(e=e.toLowerCase()){case"hasz":{const e=n.hasZ;return void 0!==e&&e}case"hasm":{const e=n.hasM;return void 0!==e&&e}case"spatialreference":{let e=n.spatialReference._arcadeCacheId;if(void 0===e){let t=!0;Object.freeze&&Object.isFrozen(n.spatialReference)&&(t=!1),t&&(tn++,n.spatialReference._arcadeCacheId=tn,e=tn)}const t=new i.Z({wkt:n.spatialReference.wkt,wkid:n.spatialReference.wkid});return void 0!==e&&(t._arcadeCacheId="SPREF"+e.toString()),t}}switch(n.type){case"extent":switch(e){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const t=n[e];return void 0!==t?t:null}case"type":return"Extent"}break;case"polygon":switch(e){case"rings":return o=n.cache._arcadeCacheId,void 0===o&&(tn++,o=tn,n.cache._arcadeCacheId=o),new c.Z(n.rings,n.spatialReference,!0===n.hasZ,!0===n.hasM,o);case"type":return"Polygon"}break;case"point":switch(e){case"x":case"y":case"z":case"m":return void 0!==n[e]?n[e]:null;case"type":return"Point"}break;case"polyline":switch(e){case"paths":return o=n.cache._arcadeCacheId,void 0===o&&(tn++,o=tn,n.cache._arcadeCacheId=o),new c.Z(n.paths,n.spatialReference,!0===n.hasZ,!0===n.hasM,o);case"type":return"Polyline"}break;case"multipoint":switch(e){case"points":return o=n.cache._arcadeCacheId,void 0===o&&(tn++,o=tn,n.cache._arcadeCacheId=o),new l.Z(n.points,n.spatialReference,!0===n.hasZ,!0===n.hasM,o,1);case"type":return"Multipoint"}}throw new Error((0,f.H5)(r,"RUNTIME","PROPERTYNOTFOUND"))}async function on(n,e){const t=await F(n,e.object);if(null===t)throw new Error((0,f.H5)(e,"RUNTIME","NOTFOUND"));if(!1===e.computed){if("Identifier"===e.property.type){if(t instanceof i.Z||(0,s.s)(t))return t.field(e.property.name);if(t instanceof I.Z)return rn(t,e.property.name,n,e);throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}let r=await F(n,e.property);if(t instanceof i.Z||(0,s.s)(t)){if((0,s.b)(r))return t.field(r);throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}if(t instanceof I.Z){if((0,s.b)(r))return rn(t,r,n,e);throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}if((0,s.l)(t)){if((0,s.a)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new Error((0,f.H5)(e,"RUNTIME","OUTOFBOUNDS"));return t[r]}throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}if((0,s.n)(t)){if((0,s.a)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length()+r),r>=t.length()||r<0)throw new Error((0,f.H5)(e,"RUNTIME","OUTOFBOUNDS"));return t.get(r)}throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}if((0,s.b)(t)){if((0,s.a)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new Error((0,f.H5)(e,"RUNTIME","OUTOFBOUNDS"));return t[r]}throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}throw new Error((0,f.H5)(e,"RUNTIME","INVALIDTYPE"))}async function an(n,e){const t=await F(n,e.argument);if((0,s.i)(t)){if("!"===e.operator)return!t;if("-"===e.operator)return-1*(0,s.f)(t);if("+"===e.operator)return 1*(0,s.f)(t);if("~"===e.operator)return~(0,s.f)(t);throw new Error((0,f.H5)(e,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}if("-"===e.operator)return-1*(0,s.f)(t);if("+"===e.operator)return 1*(0,s.f)(t);if("~"===e.operator)return~(0,s.f)(t);throw new Error((0,f.H5)(e,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}async function un(n,e){const t=[];for(let r=0;r<e.elements.length;r++)t.push(await F(n,e.elements[r]));for(let r=0;r<t.length;r++){if((0,s.o)(t[r]))throw new Error((0,f.H5)(e,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));t[r]===s.v&&(t[r]=null)}return t}async function cn(n,e){const t=[];t[0]=await F(n,e.left),t[1]=await F(n,e.right);const r=t[0],o=t[1];switch(e.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,s.r)((0,s.f)(r),(0,s.f)(o),e.operator);case"==":return(0,s.m)(r,o);case"!=":return!(0,s.m)(r,o);case"<":case">":case"<=":case">=":return(0,s.q)(r,o,e.operator);case"+":return(0,s.b)(r)||(0,s.b)(o)?(0,s.h)(r)+(0,s.h)(o):(0,s.f)(r)+(0,s.f)(o);case"-":return(0,s.f)(r)-(0,s.f)(o);case"*":return(0,s.f)(r)*(0,s.f)(o);case"/":return(0,s.f)(r)/(0,s.f)(o);case"%":return(0,s.f)(r)%(0,s.f)(o);default:throw new Error((0,f.H5)(e,"RUNTIME","OPERATORNOTRECOGNISED"))}}async function ln(n,e){if("AssignmentExpression"===e.left.type||"UpdateExpression"===e.left.type)throw new Error((0,f.H5)(e.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===e.right.type||"UpdateExpression"===e.right.type)throw new Error((0,f.H5)(e.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));const t=await F(n,e.left);let r=null;if(!(0,s.i)(t))throw new Error((0,f.H5)(e,"RUNTIME","ONLYBOOLEAN"));switch(e.operator){case"||":if(!0===t)return t;if(r=await F(n,e.right),(0,s.i)(r))return r;throw new Error((0,f.H5)(e,"RUNTIME","ONLYORORAND"));case"&&":if(!1===t)return t;if(r=await F(n,e.right),(0,s.i)(r))return r;throw new Error((0,f.H5)(e,"RUNTIME","ONLYORORAND"));default:throw new Error((0,f.H5)(e,"RUNTIME","ONLYORORAND"))}}async function sn(n,e){const t=e.name.toLowerCase();if(null!==n.localScope&&void 0!==n.localScope[t]){const e=n.localScope[t];if(!0===e.valueset)return e.value;if(null!==e.d)return e.d;e.d=F(n,e.node);const r=await e.d;return e.value=r,e.valueset=!0,r}if(void 0!==n.globalScope[t]){const e=n.globalScope[t];if(!0===e.valueset)return e.value;if(null!==e.d)return e.d;e.d=F(n,e.node);const r=await e.d;return e.value=r,e.valueset=!0,r}throw new Error((0,f.H5)(e,"RUNTIME","VARIABLENOTFOUND"))}async function fn(n,e){if("Identifier"!==e.callee.type)throw new Error((0,f.H5)(e,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==n.localScope&&void 0!==n.localScope[e.callee.name.toLowerCase()]){const t=n.localScope[e.callee.name.toLowerCase()];if(t.value instanceof s.N)return t.value.fn(n,e);if(t.value instanceof u.Z)return An(n,e,t.value.definition);throw new Error((0,f.H5)(e,"RUNTIME","NOTAFUNCTION"))}if(void 0!==n.globalScope[e.callee.name.toLowerCase()]){const t=n.globalScope[e.callee.name.toLowerCase()];if(t.value instanceof s.N)return t.value.fn(n,e);if(t.value instanceof u.Z)return An(n,e,t.value.definition);throw new Error((0,f.H5)(e,"RUNTIME","NOTAFUNCTION"))}throw new Error((0,f.H5)(e,"RUNTIME","NOTFOUND"))}async function wn(n,e){return e.value?e.value.cooked:""}async function hn(n,e){const t=[];for(let i=0;i<e.expressions.length;i++){const r=await F(n,e.expressions[i]);t[i]=(0,s.h)(r)}let r="",o=0;for(const i of e.quasis)r+=i.value?i.value.cooked:"",!1===i.tail&&(r+=t[o]?t[o]:"",o++);return r}const pn={};function dn(n){return null===n?"":(0,s.l)(n)||(0,s.n)(n)?"Array":(0,s.j)(n)?"Date":(0,s.b)(n)?"String":(0,s.i)(n)?"Boolean":(0,s.a)(n)?"Number":n instanceof o.Z?"Attachment":n instanceof r.Z?"Portal":n instanceof i.Z?"Dictionary":(0,s.s)(n)?"Feature":n instanceof N.Z?"Point":n instanceof A.Z?"Polygon":n instanceof R.Z?"Polyline":n instanceof v.Z?"Multipoint":n instanceof E.Z?"Extent":(0,s.o)(n)?"Function":(0,s.y)(n)?"FeatureSet":(0,s.z)(n)?"FeatureSetCollection":n===s.v?"":"number"==typeof n&&isNaN(n)?"Number":"Unrecognised Type"}async function gn(n,e,t,r){const o=await F(n,e.arguments[t]);if((0,s.m)(o,r))return F(n,e.arguments[t+1]);const i=e.arguments.length-t;return 1===i?F(n,e.arguments[t]):2===i?null:3===i?F(n,e.arguments[t+2]):gn(n,e,t+2,r)}async function mn(n,e,t,r){if(!0===r)return F(n,e.arguments[t+1]);if(3===e.arguments.length-t)return F(n,e.arguments[t+2]);const o=await F(n,e.arguments[t+2]);if(!1===(0,s.i)(o))throw new Error("WHEN needs boolean test conditions");return mn(n,e,t+2,o)}async function yn(n,e){const t=n.length,r=Math.floor(t/2);if(0===t)return[];if(1===t)return[n[0]];const o=[yn(n.slice(0,r),e),yn(n.slice(r,t),e)],i=await Promise.all(o);return En(i[0],i[1],e,[])}async function En(n,e,t,r){const o=r;if(!(n.length>0||e.length>0))return r;if(n.length>0&&e.length>0){let i=await t(n[0],e[0]);return isNaN(i)&&(i=1),i<=0?(o.push(n[0]),n=n.slice(1)):(o.push(e[0]),e=e.slice(1)),En(n,e,t,r)}return n.length>0?(o.push(n[0]),En(n=n.slice(1),e,t,r)):e.length>0?(o.push(e[0]),En(n,e=e.slice(1),t,r)):void 0}function In(n,e){const t=n.length,r=Math.floor(t/2);return e||(e=function(n,e){return n<e?-1:n===e?0:1}),0===t?[]:1===t?[n[0]]:vn(In(n.slice(0,r),e),In(n.slice(r,t),e),e)}function vn(n,e,t){const r=[];for(;n.length>0||e.length>0;)if(n.length>0&&e.length>0){let o=t(n[0],e[0]);isNaN(o)&&(o=1),o<=0?(r.push(n[0]),n=n.slice(1)):(r.push(e[0]),e=e.slice(1))}else n.length>0?(r.push(n[0]),n=n.slice(1)):e.length>0&&(r.push(e[0]),e=e.slice(1));return r}async function Nn(n,e,t){const r=n.body;if(t.length!==n.params.length)throw new Error("Invalid Parameter calls to function.");for(let i=0;i<t.length;i++){const r=n.params[i];"Identifier"===r.type&&(e.localScope[r.name.toLowerCase()]={d:null,value:t[i],valueset:!0,node:null})}const o=await F(e,r);if(o instanceof s.R)return o.value;if(o===s.w)throw new Error("Cannot Break from a Function");if(o===s.x)throw new Error("Cannot Continue from a Function");return o instanceof s.I?o.value:o}function An(n,e,t){return O(n,e,(function(e,r,o){const i={spatialReference:n.spatialReference,services:n.services,console:n.console,lrucache:n.lrucache,interceptor:n.interceptor,localScope:{},abortSignal:n.abortSignal,globalScope:n.globalScope,depthCounter:n.depthCounter+1};if(i.depthCounter>64)throw new Error("Exceeded maximum function depth");return Nn(t,i,o)}))}function Rn(n){const e=function(){const e={abortSignal:n.context.abortSignal,spatialReference:n.context.spatialReference,console:n.context.console,lrucache:n.context.lrucache,interceptor:n.context.interceptor,services:n.context.services,localScope:{},globalScope:n.context.globalScope,depthCounter:n.context.depthCounter+1};if(e.depthCounter>64)throw new Error("Exceeded maximum function depth");return Nn(n.definition,e,arguments)};return e}(0,h.r)(pn,Z),(0,y.r)(pn,Z),(0,g.r)(pn,Z),(0,d.r)(pn,Z),(0,m.r)(pn,Z),(0,p.registerFunctions)({functions:pn,compiled:!1,signatures:null,evaluateIdentifier:null,arcadeCustomFunctionHandler:null,mode:"async",standardFunction:Z,standardFunctionAsync:O}),pn.typeof=function(n,e){return Z(n,e,(function(n,e,t){(0,s.p)(t,1,1);const r=dn(t[0]);if("Unrecognised Type"===r)throw new Error("Unrecognised Type");return r}))},pn.iif=async function(n,e){(0,s.p)(null===e.arguments?[]:e.arguments,3,3);const t=await F(n,e.arguments[0]);if(!1===(0,s.i)(t))throw new Error("IF Function must have a boolean test condition");const r=[];return r[0]=await F(n,e.arguments[1]),r[1]=await F(n,e.arguments[2]),t?r[0]:r[1]},pn.decode=async function(n,e){if(e.arguments.length<2)throw new Error("Missing Parameters");if(2===e.arguments.length)return F(n,e.arguments[1]);if((e.arguments.length-1)%2==0)throw new Error("Must have a default value result.");return gn(n,e,1,await F(n,e.arguments[0]))},pn.when=async function(n,e){if(e.arguments.length<3)throw new Error("Missing Parameters");if(e.arguments.length%2==0)throw new Error("Must have a default value result.");const t=await F(n,e.arguments[0]);if(!1===(0,s.i)(t))throw new Error("WHEN needs boolean test conditions");return mn(n,e,0,t)},pn.sort=function(n,e){return O(n,e,(async function(n,e,t){(0,s.p)(t,1,2);let r=t[0];if((0,s.n)(r)&&(r=r.toArray()),!1===(0,s.l)(r))throw new Error("Illegal Argument");if(t.length>1){if(!1===(0,s.o)(t[1]))throw new Error("Illegal Argument");return yn(r,Rn(t[1]))}let o=r;if(0===o.length)return[];const i={};for(let c=0;c<o.length;c++){const n=dn(o[c]);""!==n&&(i[n]=!0)}if(!0===i.Array||!0===i.Dictionary||!0===i.Feature||!0===i.Point||!0===i.Polygon||!0===i.Polyline||!0===i.Multipoint||!0===i.Extent||!0===i.Function)return o.slice(0);let a=0,u="";for(const c in i)a++,u=c;return a>1||"String"===u?o=In(o,(function(n,e){if(null==n||n===s.v)return null==e||e===s.v?0:1;if(null==e||e===s.v)return-1;const t=(0,s.h)(n),r=(0,s.h)(e);return t<r?-1:t===r?0:1})):"Number"===u?o=In(o,(function(n,e){return n-e})):"Boolean"===u?o=In(o,(function(n,e){return n===e?0:e?-1:1})):"Date"===u&&(o=In(o,(function(n,e){return e-n}))),o}))};const bn={fixSpatialReference:s.A,parseArguments:T,standardFunction:Z,standardFunctionAsync:O,evaluateIdentifier:sn,arcadeCustomFunction:Rn};for(const Pn in pn)pn[Pn]={value:new s.N(pn[Pn]),valueset:!0,node:null};const Sn=function(){};function Cn(n,e){const t=new Sn;null==n&&(n={}),null==e&&(e={});const r=new i.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});r.immutable=!1,t.textformatting={value:r,valueset:!0,node:null};for(const o in e)t[o]={value:new s.N(e[o]),native:!0,valueset:!0,node:null};for(const o in n)n[o]&&"esri.Graphic"===n[o].declaredClass?t[o]={value:a.Z.createFromGraphic(n[o]),valueset:!0,node:null}:t[o]={value:n[o],valueset:!0,node:null};return t}function Tn(n){console.log(n)}Sn.prototype=pn,Sn.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},Sn.prototype.pi={value:Math.PI,valueset:!0,node:null};const Zn=bn;function On(n){const e={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:Z,standardFunctionAsync:O,evaluateIdentifier:sn,arcadeCustomFunctionHandler:Rn};for(let t=0;t<n.length;t++)n[t].registerFunctions(e);for(const t in e.functions)pn[t]={value:new s.N(e.functions[t]),valueset:!0,node:null},Sn.prototype[t]=pn[t];for(let t=0;t<e.signatures.length;t++)(0,f.gW)(e.signatures[t],"async")}async function Fn(n,e){let t=e.spatialReference;null==t&&(t=new b.Z({wkid:102100}));const r=Cn(e.vars,e.customfunctions),o={spatialReference:t,services:e.services,abortSignal:void 0===e.abortSignal||null===e.abortSignal?{aborted:!1}:e.abortSignal,globalScope:r,console:e.console?e.console:Tn,lrucache:e.lrucache,interceptor:e.interceptor,localScope:null,depthCounter:1};let i=await F(o,n.body[0].body);if(i instanceof s.R&&(i=i.value),i instanceof s.I&&(i=i.value),i===s.v&&(i=null),i===s.w)throw new Error("Cannot return BREAK");if(i===s.x)throw new Error("Cannot return CONTINUE");if(i instanceof s.N)throw new Error("Cannot return FUNCTION");if(i instanceof u.Z)throw new Error("Cannot return FUNCTION");return i}function xn(n,e){return(0,f.mb)(n)}function Un(n,e){return(0,f.FS)(n,e,"full")}function Hn(n,e){return(0,f.bV)(n,e)}function Ln(n,e){return(0,f.w8)(n,e)}function Mn(n){return(0,f.Vf)(n)}On([w.A])},88163:function(n,e,t){t.r(e),t.d(e,{registerFunctions:function(){return E}});var r=t(88256),o=t(4080),i=t(94837),a=t(5306),u=t(91772),c=t(20031),l=t(15917),s=t(74304),f=t(86566),w=t(89542),h=t(90819),p=t(53736),d=t(17321);function g(n){return 0===r.i8.indexOf("4.")?w.Z.fromExtent(n):new w.Z({spatialReference:n.spatialReference,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]})}function m(n){if((0,i.p)(n,2,2),n[0]instanceof c.Z&&n[1]instanceof c.Z);else if(n[0]instanceof c.Z&&null===n[1]);else if(n[1]instanceof c.Z&&null===n[0]);else if(null!==n[0]||null!==n[1])throw new Error("Illegal Argument")}async function y(n,e){if("polygon"!==n.type&&"polyline"!==n.type&&"extent"!==n.type)return 0;let t=1;(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid)&&(t=(0,a._R)(n.spatialReference)/(0,d.c9)(n.spatialReference));let r=0;if("polyline"===n.type)for(const i of n.paths)for(let n=1;n<i.length;n++)r+=(0,a.AW)(i[n],i[n-1],t);else if("polygon"===n.type)for(const i of n.rings){for(let n=1;n<i.length;n++)r+=(0,a.AW)(i[n],i[n-1],t);(i[0][0]!==i[i.length-1][0]||i[0][1]!==i[i.length-1][1]||void 0!==i[0][2]&&i[0][2]!==i[i.length-1][2])&&(r+=(0,a.AW)(i[0],i[i.length-1],t))}else"extent"===n.type&&(r+=2*(0,a.AW)([n.xmin,n.ymin,0],[n.xmax,n.ymin,0],t),r+=2*(0,a.AW)([n.xmin,n.ymin,0],[n.xmin,n.ymax,0],t),r*=2,r+=4*Math.abs((0,i.C)(n.zmax,0)*t-(0,i.C)(n.zmin,0)*t));const o=new h.Z({hasZ:!1,hasM:!1,spatialReference:n.spatialReference,paths:[[0,0],[0,r]]});return(0,l.sz)(o,e)}function E(n){"async"===n.mode&&(n.functions.disjoint=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,i.H)(t)),null===t[0]||null===t[1]||(0,l.ED)(t[0],t[1])}))},n.functions.intersects=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,i.H)(t)),null!==t[0]&&null!==t[1]&&(0,l.kK)(t[0],t[1])}))},n.functions.touches=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,i.H)(t)),null!==t[0]&&null!==t[1]&&(0,l.W4)(t[0],t[1])}))},n.functions.crosses=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,i.H)(t)),null!==t[0]&&null!==t[1]&&(0,l.jU)(t[0],t[1])}))},n.functions.within=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,i.H)(t)),null!==t[0]&&null!==t[1]&&(0,l.uh)(t[0],t[1])}))},n.functions.contains=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,i.H)(t)),null!==t[0]&&null!==t[1]&&(0,l.r3)(t[0],t[1])}))},n.functions.overlaps=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,i.H)(t)),null!==t[0]&&null!==t[1]&&(0,l.Nm)(t[0],t[1])}))},n.functions.equals=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return(0,i.p)(t,2,2),t[0]===t[1]||(t[0]instanceof c.Z&&t[1]instanceof c.Z?(0,l.fS)(t[0],t[1]):!(!(0,i.j)(t[0])||!(0,i.j)(t[1]))&&t[0].getTime()===t[1].getTime())}))},n.functions.relate=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,i.H)(t),(0,i.p)(t,3,3),t[0]instanceof c.Z&&t[1]instanceof c.Z)return(0,l.LV)(t[0],t[1],(0,i.h)(t[2]));if(t[0]instanceof c.Z&&null===t[1])return!1;if(t[1]instanceof c.Z&&null===t[0])return!1;if(null===t[0]&&null===t[1])return!1;throw new Error("Illegal Argument")}))},n.functions.intersection=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,i.H)(t)),null===t[0]||null===t[1]?null:(0,l.wf)(t[0],t[1])}))},n.functions.union=function(e,t){return n.standardFunctionAsync(e,t,(function(n,t,r){const a=[];if(0===(r=(0,i.H)(r)).length)throw new Error("Function called with wrong number of Parameters");if(1===r.length)if((0,i.l)(r[0])){const n=(0,i.H)(r[0]);for(let e=0;e<n.length;e++)if(null!==n[e]){if(!(n[e]instanceof c.Z))throw new Error("Illegal Argument");a.push(n[e])}}else{if(!(0,i.n)(r[0])){if(r[0]instanceof c.Z)return(0,i.A)((0,o.r1)(r[0]),e.spatialReference);if(null===r[0])return null;throw new Error("Illegal Argument")}{const n=(0,i.H)(r[0].toArray());for(let e=0;e<n.length;e++)if(null!==n[e]){if(!(n[e]instanceof c.Z))throw new Error("Illegal Argument");a.push(n[e])}}}else for(let e=0;e<r.length;e++)if(null!==r[e]){if(!(r[e]instanceof c.Z))throw new Error("Illegal Argument");a.push(r[e])}return 0===a.length?null:(0,l.G0)(a)}))},n.functions.difference=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,i.H)(t)),null!==t[0]&&null===t[1]?(0,o.r1)(t[0]):null===t[0]?null:(0,l.e5)(t[0],t[1])}))},n.functions.symmetricdifference=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){return m(t=(0,i.H)(t)),null===t[0]&&null===t[1]?null:null===t[0]?(0,o.r1)(t[1]):null===t[1]?(0,o.r1)(t[0]):(0,l.Sp)(t[0],t[1])}))},n.functions.clip=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,i.H)(t),(0,i.p)(t,2,2),!(t[1]instanceof u.Z)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");return null===t[1]?null:(0,l.oq)(t[0],t[1])}))},n.functions.cut=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,i.H)(t),(0,i.p)(t,2,2),!(t[1]instanceof h.Z)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return[];if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");return null===t[1]?[(0,o.r1)(t[0])]:(0,l.z7)(t[0],t[1])}))},n.functions.area=function(e,t){return n.standardFunctionAsync(e,t,(async function(n,t,r){if((0,i.p)(r,1,2),null===(r=(0,i.H)(r))[0])return 0;if((0,i.y)(r[0])){const n=await r[0].sumArea((0,o.EI)((0,i.C)(r[1],-1)),!1,e.abortSignal);if(e.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}if((0,i.l)(r[0])||(0,i.n)(r[0])){const n=(0,i.K)(r[0],e.spatialReference);return null===n?0:(0,l.CJ)(n,(0,o.EI)((0,i.C)(r[1],-1)))}if(!(r[0]instanceof c.Z))throw new Error("Illegal Argument");return(0,l.CJ)(r[0],(0,o.EI)((0,i.C)(r[1],-1)))}))},n.functions.areageodetic=function(e,t){return n.standardFunctionAsync(e,t,(async function(n,t,r){if((0,i.p)(r,1,2),null===(r=(0,i.H)(r))[0])return 0;if((0,i.y)(r[0])){const n=await r[0].sumArea((0,o.EI)((0,i.C)(r[1],-1)),!0,e.abortSignal);if(e.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}if((0,i.l)(r[0])||(0,i.n)(r[0])){const n=(0,i.K)(r[0],e.spatialReference);return null===n?0:(0,l.Y4)(n,(0,o.EI)((0,i.C)(r[1],-1)))}if(!(r[0]instanceof c.Z))throw new Error("Illegal Argument");return(0,l.Y4)(r[0],(0,o.EI)((0,i.C)(r[1],-1)))}))},n.functions.length=function(e,t){return n.standardFunctionAsync(e,t,(async function(n,t,r){if((0,i.p)(r,1,2),null===(r=(0,i.H)(r))[0])return 0;if((0,i.y)(r[0])){const n=await r[0].sumLength((0,o.Lz)((0,i.C)(r[1],-1)),!1,e.abortSignal);if(e.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}if((0,i.l)(r[0])||(0,i.n)(r[0])){const n=(0,i.J)(r[0],e.spatialReference);return null===n?0:(0,l.sz)(n,(0,o.Lz)((0,i.C)(r[1],-1)))}if(!(r[0]instanceof c.Z))throw new Error("Illegal Argument");return(0,l.sz)(r[0],(0,o.Lz)((0,i.C)(r[1],-1)))}))},n.functions.length3d=function(e,t){return n.standardFunctionAsync(e,t,(function(n,t,r){if((0,i.p)(r,1,2),null===(r=(0,i.H)(r))[0])return 0;if((0,i.l)(r[0])||(0,i.n)(r[0])){const n=(0,i.J)(r[0],e.spatialReference);return null===n?0:!0===n.hasZ?y(n,(0,o.Lz)((0,i.C)(r[1],-1))):(0,l.sz)(n,(0,o.Lz)((0,i.C)(r[1],-1)))}if(!(r[0]instanceof c.Z))throw new Error("Illegal Argument");return!0===r[0].hasZ?y(r[0],(0,o.Lz)((0,i.C)(r[1],-1))):(0,l.sz)(r[0],(0,o.Lz)((0,i.C)(r[1],-1)))}))},n.functions.lengthgeodetic=function(e,t){return n.standardFunctionAsync(e,t,(async function(n,t,r){if((0,i.p)(r,1,2),null===(r=(0,i.H)(r))[0])return 0;if((0,i.y)(r[0])){const n=await r[0].sumLength((0,o.Lz)((0,i.C)(r[1],-1)),!0,e.abortSignal);if(e.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}if((0,i.l)(r[0])||(0,i.n)(r[0])){const n=(0,i.J)(r[0],e.spatialReference);return null===n?0:(0,l.kQ)(n,(0,o.Lz)((0,i.C)(r[1],-1)))}if(!(r[0]instanceof c.Z))throw new Error("Illegal Argument");return(0,l.kQ)(r[0],(0,o.Lz)((0,i.C)(r[1],-1)))}))},n.functions.distance=function(e,t){return n.standardFunctionAsync(e,t,(function(n,t,r){r=(0,i.H)(r),(0,i.p)(r,2,3);let a=r[0];((0,i.l)(r[0])||(0,i.n)(r[0]))&&(a=(0,i.L)(r[0],e.spatialReference));let u=r[1];if(((0,i.l)(r[1])||(0,i.n)(r[1]))&&(u=(0,i.L)(r[1],e.spatialReference)),!(a instanceof c.Z))throw new Error("Illegal Argument");if(!(u instanceof c.Z))throw new Error("Illegal Argument");return(0,l.TE)(a,u,(0,o.Lz)((0,i.C)(r[2],-1)))}))},n.functions.distancegeodetic=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){t=(0,i.H)(t),(0,i.p)(t,2,3);const r=t[0],a=t[1];if(!(r instanceof f.Z))throw new Error("Illegal Argument");if(!(a instanceof f.Z))throw new Error("Illegal Argument");const u=new h.Z({paths:[],spatialReference:r.spatialReference});return u.addPath([r,a]),(0,l.kQ)(u,(0,o.Lz)((0,i.C)(t[2],-1)))}))},n.functions.densify=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,i.H)(t),(0,i.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");const r=(0,i.f)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");if(r<=0)throw new Error("Illegal Argument");return t[0]instanceof w.Z||t[0]instanceof h.Z?(0,l.Cz)(t[0],r,(0,o.Lz)((0,i.C)(t[2],-1))):t[0]instanceof u.Z?(0,l.Cz)(g(t[0]),r,(0,o.Lz)((0,i.C)(t[2],-1))):t[0]}))},n.functions.densifygeodetic=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,i.H)(t),(0,i.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");const r=(0,i.f)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");if(r<=0)throw new Error("Illegal Argument");return t[0]instanceof w.Z||t[0]instanceof h.Z?(0,l.j2)(t[0],r,(0,o.Lz)((0,i.C)(t[2],-1))):t[0]instanceof u.Z?(0,l.j2)(g(t[0]),r,(0,o.Lz)((0,i.C)(t[2],-1))):t[0]}))},n.functions.generalize=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,i.H)(t),(0,i.p)(t,2,4),null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");const r=(0,i.f)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");return(0,l.D$)(t[0],r,(0,i.g)((0,i.C)(t[2],!0)),(0,o.Lz)((0,i.C)(t[3],-1)))}))},n.functions.buffer=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,i.H)(t),(0,i.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");const r=(0,i.f)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");return 0===r?(0,o.r1)(t[0]):(0,l.f3)(t[0],r,(0,o.Lz)((0,i.C)(t[2],-1)))}))},n.functions.buffergeodetic=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,i.H)(t),(0,i.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");const r=(0,i.f)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");return 0===r?(0,o.r1)(t[0]):(0,l.rd)(t[0],r,(0,o.Lz)((0,i.C)(t[2],-1)))}))},n.functions.offset=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,i.H)(t),(0,i.p)(t,2,6),null===t[0])return null;if(!(t[0]instanceof w.Z||t[0]instanceof h.Z))throw new Error("Illegal Argument");const r=(0,i.f)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");const a=(0,i.f)((0,i.C)(t[4],10));if(isNaN(a))throw new Error("Illegal Argument");const u=(0,i.f)((0,i.C)(t[5],0));if(isNaN(u))throw new Error("Illegal Argument");return(0,l.cv)(t[0],r,(0,o.Lz)((0,i.C)(t[2],-1)),(0,i.h)((0,i.C)(t[3],"round")).toLowerCase(),a,u)}))},n.functions.rotate=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){t=(0,i.H)(t),(0,i.p)(t,2,3);let r=t[0];if(null===r)return null;if(!(r instanceof c.Z))throw new Error("Illegal Argument");r instanceof u.Z&&(r=w.Z.fromExtent(r));const o=(0,i.f)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");const a=(0,i.C)(t[2],null);if(null===a)return(0,l.U1)(r,o);if(a instanceof f.Z)return(0,l.U1)(r,o,a);throw new Error("Illegal Argument")}))},n.functions.centroid=function(e,t){return n.standardFunctionAsync(e,t,(function(n,t,r){if(r=(0,i.H)(r),(0,i.p)(r,1,1),null===r[0])return null;let l=r[0];if(((0,i.l)(r[0])||(0,i.n)(r[0]))&&(l=(0,i.L)(r[0],e.spatialReference)),null===l)return null;if(!(l instanceof c.Z))throw new Error("Illegal Argument");return l instanceof f.Z?(0,i.A)((0,o.r1)(r[0]),e.spatialReference):l instanceof w.Z?l.centroid:l instanceof h.Z?(0,a.s9)(l):l instanceof s.Z?(0,a.Ay)(l):l instanceof u.Z?l.center:null}))},n.functions.multiparttosinglepart=function(e,t){return n.standardFunctionAsync(e,t,(async function(n,t,r){r=(0,i.H)(r),(0,i.p)(r,1,1);const a=[];if(null===r[0])return null;if(!(r[0]instanceof c.Z))throw new Error("Illegal Argument");if(r[0]instanceof f.Z)return[(0,i.A)((0,o.r1)(r[0]),e.spatialReference)];if(r[0]instanceof u.Z)return[(0,i.A)((0,o.r1)(r[0]),e.spatialReference)];const d=await(0,l.og)(r[0]);if(d instanceof w.Z){const n=[],e=[];for(let t=0;t<d.rings.length;t++)if(d.isClockwise(d.rings[t])){const e=(0,p.im)({rings:[d.rings[t]],hasZ:!0===d.hasZ,hazM:!0===d.hasM,spatialReference:d.spatialReference.toJSON()});n.push(e)}else e.push({ring:d.rings[t],pt:d.getPoint(t,0)});for(let t=0;t<e.length;t++)for(let r=0;r<n.length;r++)if(n[r].contains(e[t].pt)){n[r].addRing(e[t].ring);break}return n}if(d instanceof h.Z){const n=[];for(let e=0;e<d.paths.length;e++){const t=(0,p.im)({paths:[d.paths[e]],hasZ:!0===d.hasZ,hazM:!0===d.hasM,spatialReference:d.spatialReference.toJSON()});n.push(t)}return n}if(r[0]instanceof s.Z){const n=(0,i.A)((0,o.r1)(r[0]),e.spatialReference);for(let e=0;e<n.points.length;e++)a.push(n.getPoint(e));return a}return null}))},n.functions.issimple=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,i.H)(t),(0,i.p)(t,1,1),null===t[0])return!0;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");return(0,l.Gg)(t[0])}))},n.functions.simplify=function(e,t){return n.standardFunctionAsync(e,t,(function(n,e,t){if(t=(0,i.H)(t),(0,i.p)(t,1,1),null===t[0])return null;if(!(t[0]instanceof c.Z))throw new Error("Illegal Argument");return(0,l.og)(t[0])}))})}},15917:function(n,e,t){t.d(e,{CJ:function(){return D},Cz:function(){return M},D$:function(){return L},ED:function(){return v},G0:function(){return Z},Gg:function(){return R},LV:function(){return A},Nm:function(){return N},Sp:function(){return C},TE:function(){return g},U1:function(){return H},W4:function(){return E},Y4:function(){return z},cv:function(){return O},e5:function(){return S},f3:function(){return F},fS:function(){return m},j2:function(){return P},jU:function(){return d},kK:function(){return y},kQ:function(){return _},og:function(){return b},oq:function(){return w},r3:function(){return p},rd:function(){return x},sz:function(){return k},uh:function(){return I},wf:function(){return T},z7:function(){return h}});t(91957);var r=t(76061),o=(t(86566),t(53736));function i(n){return Array.isArray(n)?n[0]?.spatialReference:n?.spatialReference}function a(n){return n?Array.isArray(n)?n.map(a):n.toJSON?n.toJSON():n:n}function u(n){return Array.isArray(n)?n.map((n=>(0,o.im)(n))):(0,o.im)(n)}function c(n,e){let t;return Array.isArray(n)?t=n:(t=[],t.push(n),null!=e&&t.push(e)),t}let l;async function s(){return l||(l=(0,r.bA)("geometryEngineWorker",{strategy:"distributed"})),l}async function f(n,e){return(await s()).invoke("executeGEOperation",{operation:n,parameters:a(e)})}async function w(n,e){return u(await f("clip",[i(n),n,e]))}async function h(n,e){return u(await f("cut",[i(n),n,e]))}function p(n,e){return f("contains",[i(n),n,e])}function d(n,e){return f("crosses",[i(n),n,e])}function g(n,e,t){return f("distance",[i(n),n,e,t])}function m(n,e){return f("equals",[i(n),n,e])}function y(n,e){return f("intersects",[i(n),n,e])}function E(n,e){return f("touches",[i(n),n,e])}function I(n,e){return f("within",[i(n),n,e])}function v(n,e){return f("disjoint",[i(n),n,e])}function N(n,e){return f("overlaps",[i(n),n,e])}function A(n,e,t){return f("relate",[i(n),n,e,t])}function R(n){return f("isSimple",[i(n),n])}async function b(n){return u(await f("simplify",[i(n),n]))}async function S(n,e){return u(await f("difference",[i(n),n,e]))}async function C(n,e){return u(await f("symmetricDifference",[i(n),n,e]))}async function T(n,e){return u(await f("intersect",[i(n),n,e]))}async function Z(n,e=null){const t=c(n,e);return u(await f("union",[i(t),t]))}async function O(n,e,t,r,o,a){return u(await f("offset",[i(n),n,e,t,r,o,a]))}async function F(n,e,t,r=!1){const o=[i(n),n,e,t,r];return u(await f("buffer",o))}async function x(n,e,t,r,o,a){const c=[i(n),n,e,t,r,o,a];return u(await f("geodesicBuffer",c))}function U(n){return"xmin"in n?n.center:"x"in n?n:n.extent.center}async function H(n,e,t){if(null==n)throw new Error("Illegal Argument Exception");const r=n.spatialReference;t=t??U(n);const o=n.constructor.fromJSON(await f("rotate",[r,n,e,t]));return o.spatialReference=r,o}async function L(n,e,t,r){return u(await f("generalize",[i(n),n,e,t,r]))}async function M(n,e,t){return u(await f("densify",[i(n),n,e,t]))}async function P(n,e,t,r=0){return u(await f("geodesicDensify",[i(n),n,e,t,r]))}function D(n,e){return f("planarArea",[i(n),n,e])}function k(n,e){return f("planarLength",[i(n),n,e])}function z(n,e,t){return f("geodesicArea",[i(n),n,e,t])}function _(n,e,t){return f("geodesicLength",[i(n),n,e,t])}}}]);
//# sourceMappingURL=3549.6700bffd.js.map